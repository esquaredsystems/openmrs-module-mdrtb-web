{% extends 'app/base/base.html' %}

{% block content %}

<div class="p-4 m-6 mx-auto w-1/2 flex flex-col justify-center">
  <h1 class="page-title">{{'mdrtb.patientLists'|get_message:request.session.locale}}</h1>

  <form target="_blank" method="post" action="{% url 'patientlist' %}" class=" flex flex-col space-y-4 p-4">
    {% csrf_token %}
    <div>
      {% include 'app/components/locations.html' %}
    </div>

    <div class="input-container">
      <label class="input-label w-1/6" for="year">{{"mdrtb.year"|get_message:request.session.locale}}</label>
      <input required type="text" class="input form-control" name="year" size="4" id="year">
    </div>
    <div class="input-container">
      <label class="input-label w-1/6" for="month">{{"mdrtb.month"|get_message:request.session.locale}}</label>
      <select required name="month" id="month" class="input form-control">
        <option value="">Select</option>
        {% for month in months %}
        <option value="{{month.value}}">{{month.name}}</option>
        {% endfor %}
      </select>
    </div>
    <div class="input-container">
      <label class="input-label w-1/6" for="quarter">{{"mdrtb.quarter"|get_message:request.session.locale}}</label>

      <div class="flex items-center w-full space-x-4">
        <div class="space-x-2 flex items-center">
          <label>Select</label>
          <input checked type="radio" name="quarter" id="quarter" class="radio-input" value="">
        </div>
        {% for quarter in quarters %}
        <div class="space-x-2 flex items-center">
          <label for="quarter">{{quarter}}</label>
          <input required type="radio" name="quarter" id="quarter" class="radio-input" value="{{quarter}}">
        </div>
        {% endfor %}
      </div>
    </div>

    <div class="p-4 flex flex-col justify-center space-y-2">
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="allenrolled">
        <label>{{'mdrtb.allCasesEnrolled'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="dotsbyregistrationgroup">
        <label>{{'mdrtb.dotsCasesByRegistrationGroup'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="dotsbydrugresistance">
        <label>{{'mdrtb.byDrugResistance'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="dotsbyanatomicalsite">
        <label>{{'mdrtb.dotsCasesByAnatomicalSite'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname"
          value="dotsbyregistrationgroupandbacteriologicalstatus">
        <label>{{'dotsPulmonaryCasesByRegisrationGroupAndBacStatus'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="mdrxdrpatients">
        <label>{{'mdrtb.drTbPatients'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="mdrsuccessfultreatmentoutcome">
        <label>{{'mdrtb.drTbPatientsSuccessfulTreatment'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="mdrxdrwithnotreatment">
        <label>{{'mdrtb.drTbPatientsNoTreatment'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="womenofchildbearingage">
        <label>{{'mdrtb.womenOfChildbearingAge'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="menofconscriptage">
        <label>{{'mdrtb.menOfConscriptAge'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="withconcomitantdisease">
        <label>{{'mdrtb.withConcomitantDisease'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="bydwelling">
        <label>{{'mdrtb.byDwelling'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="bysocprofstatus">
        <label>{{'mdrtb.bySocProfStatus'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="bypopulationcategory">
        <label>{{'mdrtb.byPopCategory'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="byplacesofdetection">
        <label>{{'mdrtb.byPlaceOfDetection'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="bymethodofdetection">
        <label>{{'mdrtb.byMethodOfDetection'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="bycircumstancesofdetection">
        <label>{{'mdrtb.byCircumstancesOfDetection'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="bypulmonarylocation">
        <label>{{'mdrtb.byPulmonaryLocation'|get_message:request.session.locale}}</label>
      </div>
      <div class="flex items-center space-x-4">
        <input required type="radio" class="radio-input" name="listname" value="byextrapulmonarylocation">
        <label>{{'mdrtb.byExtraPulmonaryLocation'|get_message:request.session.locale}}</label>
      </div>
    </div>

    <div>
      <button id="submitBtn" class="button-primary w-1/5">
        {{'mdrtb.generate'|get_message:request.session.locale}}</button>
      <a href="/" class="cancel-button">
        {{'general.cancel'|get_message_openMRS:request.session.locale}} </a>
    </div>
  </form>

</div>
<script type="text/javascript">
  $("#region-select").prop("required", true);
  $('#month').change((e) => {
    if (e.target.value != '') {
      $("input[name='quarter']").prop('disabled', true)
      $("input[name='quarter']").prop('title', 'Quarter cannot be selected with month')
    } else {
      $("input[name='quarter']").prop('disabled', false)
      $("input[name='quarter']").prop('title', '')
    }
  })
  $("input[name='quarter']").change((e) => {
    if (e.target.value != '') {
      $('#month').prop('disabled', true)
      $('#month').prop('title', 'Month cannot be selected with quarter')
    } else {
      $('#month').prop('disabled', false)
      $('#month').prop('title', '')
    }
  })
  const disableSubmit = () => {
    $('#submitBtn').prop('disabled', true)
    $('#submitBtn').removeClass('button-primary')
    $('#submitBtn').html(`
      <lord-icon src="https://cdn.lordicon.com/dpinvufc.json" trigger="loop"
          colors="primary:#000,secondary:#08a88a" style="width:50px;height:50px">
      </lord-icon>`)
  }
</script>

{% endblock %}