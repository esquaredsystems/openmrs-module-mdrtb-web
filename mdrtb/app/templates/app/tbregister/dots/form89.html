{% extends 'app/base/base_without_menu.html' %} 
{% block title %} 
{{title}} 
{%endblock %} 


{%block content%}
{% if messages %}
{% for message in messages %}
{% if message.tags %}

<div id='alert-er' class="left-0 transition-all animate-bounce duration-200 alert alert-danger m-4 w-fit flex-center space-x-4">
  <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" viewBox="0 0 16 16" role="img"
    aria-label="Warning:">
    <path
      d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
  </svg>
  <p>{{message}}</p>
</div>
<script>
  setTimeout(() => {
    $('#alert-er').removeClass('left-0')
    $('#alert-er').addClass('-left-40')

  }, 2000)
  setTimeout(() => {
    $('#alert-er').addClass('hidden')

  }, 2100)

</script>
{% endif %}
{% endfor %}
{% endif %}
<div>
  <form action="{% url 'tb03' %}" method="post" class="flex flex-col">
    {% csrf_token %}
    <div class="m-16 flex flex-col justify-center space-y-4">
      <h1 class="text-[#2D9CDB] text-3xl font-bold">
        {{'mdrtb.form89'|get_message:request.session.locale}}
      </h1>
      <div
        class="bg-[#9e9e9e28] shadow-md p-4 flex flex-col justify-center space-y-4"
      >
        <div class="flex items-center space-x-12">
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.form89.registrationDate'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label"> date </span>
          </div>
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.oblast'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label"> {{enrollment_info.oblast}} </span>
          </div>
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.district'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label"> {{enrollment_info.district}} </span>
          </div>
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.facility'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label"> {{enrollment_info.facility}} </span>
          </div>
        </div>
        <div class="flex items-center space-x-12">
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.name'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label">
              {{created_patient.names.0.familyName}},{{created_patient.names.0.givenName}}
            </span>
          </div>
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.tb03.tb03RegistrationNumber'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label">
              {{created_patient.identifiers.0.identifier}}
            </span>
          </div>
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.tb03.tb03RegistrationYear'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label"> {{created_patient.gender}} </span>
          </div>
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.tb03.ageAtRegistration'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label"> {{created_patient.age}} </span>
          </div>
        </div>
        <div class="flex items-center space-x-12">
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.tb03.dateOfBirth'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label"> {{created_patient.age}} </span>
          </div>
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.tb03.gender'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label">
              {{created_patient.addresses.0.address1}}
            </span>
          </div>
        </div>
        <div class="flex items-center space-x-12">
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.tb03.siteOfDisease'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label">
              {{enrollment_info.registration_group_prev_treatment}}
            </span>
          </div>
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.tb03.address'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label">
              {{enrollment_info.registration_group_prev_drug}}
            </span>
          </div>
          <div class="space-x-3">
            <span class="font-bold">
              {{'mdrtb.form89.ibc20'|get_message:request.session.locale}}:
            </span>
            <span class="tb03-form-label">
              {{enrollment_info.registration_group_prev_drug}}
            </span>
          </div>
        </div>
      </div>
      <div class="p-4 flex flex-col justify-center space-y-4">
        <div class="flex items-center justify-between space-x-6">
          <div class="input-container">
            <label class="tb03-form-label" for="ipCenter"
              >{{'mdrtb.form89.locationType'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="ipCenter">
              <option value="{{'Location.city'|get_message_openMRS:request.session.locale}}">{{'Location.city'|get_message_openMRS:request.session.locale}}</option>
              <option value="{{'Location.village'|get_message_openMRS:request.session.locale}}">{{'Location.village'|get_message_openMRS:request.session.locale}}</option>
            </select>
          </div>
          <div class="input-container">
            <label class="tb03-form-label" for="ipCenterName"
              >{{'mdrtb.form89.profession'|get_message:request.session.locale}}</label
            >
            <select class="input" name="" id="">
                {% for concept in concepts.profession %}
              <option value="{{concept.uuid}}">{{concept.name}}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        <div class="flex items-center justify-between space-x-6">
          <div class="input-container">
            <label class="tb03-form-label" for="cpCenter"
              >{{'mdrtb.form89.populationCategory'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="cpCenter">
                {% for concept in concepts.populationcategory %}
                <option value="{{concept.uuid}}">{{concept.name}}</option>
                {% endfor %}
            </select>
          </div>
          <div class="input-container">
            <label class="tb03-form-label" for="cpCenterName"
              >{{'mdrtb.form89.countryOfOrigin'|get_message:request.session.locale}}</label
            >
            <input required type="text" class="input" name="cpCenterName" />
          </div>
        </div>
        <div class="flex items-center justify-between space-x-6">
          <div class="input-container">
            <label class="tb03-form-label" for="regimenType"
              >{{'mdrtb.form89.placeOfDetection'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="regimenType">
                {% for concept in concepts.placeofdetection %}
                <option value="{{concept.uuid}}">{{concept.name}}</option>
                {% endfor %}
            </select>
          </div>
          <div class="input-container">
            <label class="tb03-form-label" for="treatmentStartDate"
              >{{'mdrtb.form89.dateFirstSeekingHelp'|get_message:request.session.locale}}</label
            >
            <input
              required
              type="date"
              class="input"
              name="treatmentStartDate"
            />
          </div>
        </div>
        <div class="flex items-center justify-between space-x-6">
          <div class="input-container">
            <label class="tb03-form-label" for="siteOfTb"
              >{{'mdrtb.form89.circumstancesOfDetection'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="siteOfTb">
                {% for concept in concepts.circumstancesofdetection %}
                <option value="{{concept.uuid}}">{{concept.name}}</option>
                {% endfor %}
            </select>
          </div>
          <div class="input-container">
            <label class="tb03-form-label" for="hivDate"
              >{{'mdrtb.form89.cityOfOrigin'|get_message:request.session.locale}}</label
            >
            <input required type="date" class="input" name="hivDate" />
          </div>
        </div>
        <div class="flex items-center justify-between space-x-6">
          <div class="input-container">
            <label class="tb03-form-label" for="hivStatus"
              >{{'mdrtb.form89.dateOfReturn'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="hivStatus">
              <option value="concept.uuid">concept.name</option>
            </select>
          </div>
          <div class="input-container">
            <label class="tb03-form-label" for="artDate"
              >{{'mdrtb.form89.methodOfDetection'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="siteOfTb">
                {% for concept in concepts.methodofdetection %}
                <option value="{{concept.uuid}}">{{concept.name}}</option>
                {% endfor %}
            </select>
          </div>
        </div>
        <div class="flex items-center justify-between space-x-6">
          <div class="input-container">
            <label class="tb03-form-label" for="pctDate"
              >{{'mdrtb.form89.otherMethodOfDetection'|get_message:request.session.locale}}</label
            >
            <input required type="date" class="input" name="pctDate" />
          </div>
          <div class="input-container">
            <label class="tb03-form-label" for="xrayDate"
              >{{'mdrtb.form89.epSite'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="siteOfTb">
                {% for concept in concepts.siteofeptb %}
                <option value="{{concept.uuid}}">{{concept.name}}</option>
                {% endfor %}
            </select>
          </div>
        </div>
        <div class="flex items-center justify-between space-x-6">
          <div class="input-container">
            <label class="tb03-form-label" for="resistanceType"
              >{{'mdrtb.form89.epLocation'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="siteOfTb">
                {% for concept in concepts.siteofeptb %}
                <option value="{{concept.uuid}}">{{concept.name}}</option>
                {% endfor %}
            </select>
          </div>
          <div class="input-container">
            <label class="tb03-form-label" for="treatmentOutcome"
              >{{'mdrtb.form89.presenceOfDecay'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="treatmentOutcome">
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
          </div>
        </div>
        <div class="flex items-center justify-between space-x-6">
          <div class="input-container">
            <label class="tb03-form-label" for="resistanceType"
              >{{'mdrtb.form89.dateOfDecaySurvey'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="resistanceType">
              {% for concept in concepts.resistancetype %}
              <option value="{{concept.uuid}}">{{concept.name}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="input-container">
            <label class="tb03-form-label" for="treatmentOutcome"
              >{{'mdrtb.form89.complication'|get_message:request.session.locale}}</label
            >
            <select required class="input" name="treatmentOutcome">
              {% for concept in concepts.tuberculosistreatmentoutcome %}
              <option value="{{concept.uuid}}">{{concept.name}}</option>
              {% endfor %}
            </select>
          </div>
        </div>

        <div
          class="bg-[#9e9e9e28] shadow-md p-4 my-4 flex flex-col justify-center space-y-6"
        >
          <h2 class="text-[#2D9CDB] text-2xl font-bold">
            {{'mdrtb.form89.comorbidities'|get_message:request.session.locale}}
          </h2>
          
          <div class="flex-center justify-end space-x-6">
            <div class="input-container w-5/5">
              <label class="tb03-form-label w-2/5" for="name"
                >{{'mdrtb.form89.diabetes'|get_message:request.session.locale}}</label
              >
              <div class="flex-center space-x-4 w-3/5">
                <div class="flex-center space-x-2">
                  <label for="Male"
                    >{{'mdrtb.yes'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="M" />
                </div>
                <div class="flex-center space-x-2">
                  <label for="Female"
                    >{{'mdrtb.no'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="F" />
                </div>
              </div>
            </div>
            <div class="input-container w-5/5">
              <label class="tb03-form-label w-2/5" for="name"
                >{{'mdrtb.form89.cnsdl'|get_message:request.session.locale}}</label
              >
              <div class="flex-center space-x-4 w-3/5">
                <div class="flex-center space-x-2">
                  <label for="Male"
                    >{{'mdrtb.yes'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="M" />
                </div>
                <div class="flex-center space-x-2">
                  <label for="Female"
                    >{{'mdrtb.no'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="F" />
                </div>
              </div>
            </div>
          </div>
          <div class="flex-center justify-end space-x-6">
            <div class="input-container w-5/5">
              <label class="tb03-form-label w-2/5" for="name"
                >{{'mdrtb.form89.htHeartDisease'|get_message:request.session.locale}}</label
              >
              <div class="flex-center space-x-4 w-3/5">
                <div class="flex-center space-x-2">
                  <label for="Male"
                    >{{'mdrtb.yes'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="M" />
                </div>
                <div class="flex-center space-x-2">
                  <label for="Female"
                    >{{'mdrtb.no'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="F" />
                </div>
              </div>
            </div>
            <div class="input-container w-5/5">
              <label class="tb03-form-label w-2/5" for="name"
                >{{'mdrtb.form89.ulcer'|get_message:request.session.locale}}</label
              >
              <div class="flex-center space-x-4 w-3/5">
                <div class="flex-center space-x-2">
                  <label for="Male"
                    >{{'mdrtb.yes'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="M" />
                </div>
                <div class="flex-center space-x-2">
                  <label for="Female"
                    >{{'mdrtb.no'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="F" />
                </div>
              </div>
            </div>
          </div>
          <div class="flex-center justify-end space-x-6">
            <div class="input-container w-5/5">
              <label class="tb03-form-label w-2/5" for="name"
                >{{'mdrtb.form89.mentalDisorder'|get_message:request.session.locale}}</label
              >
              <div class="flex-center space-x-4 w-3/5">
                <div class="flex-center space-x-2">
                  <label for="Male"
                    >{{'mdrtb.yes'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="M" />
                </div>
                <div class="flex-center space-x-2">
                  <label for="Female"
                    >{{'mdrtb.no'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="F" />
                </div>
              </div>
            </div>
            <div class="input-container w-5/5">
              <label class="tb03-form-label w-2/5" for="name"
                >{{'mdrtb.form89.cancer'|get_message:request.session.locale}}</label
              >
              <div class="flex-center space-x-4 w-3/5">
                <div class="flex-center space-x-2">
                  <label for="Male"
                    >{{'mdrtb.yes'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="M" />
                </div>
                <div class="flex-center space-x-2">
                  <label for="Female"
                    >{{'mdrtb.no'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="F" />
                </div>
              </div>
            </div>
          </div>
          <div class="flex-center justify-end space-x-6">
            <div class="input-container w-5/5">
              <label class="tb03-form-label w-2/5" for="name"
                >{{'mdrtb.form89.hepatitis'|get_message:request.session.locale}}</label
              >
              <div class="flex-center space-x-4 w-3/5">
                <div class="flex-center space-x-2">
                  <label for="Male"
                    >{{'mdrtb.yes'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="M" />
                </div>
                <div class="flex-center space-x-2">
                  <label for="Female"
                    >{{'mdrtb.no'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="F" />
                </div>
              </div>
            </div>
            <div class="input-container w-5/5">
              <label class="tb03-form-label w-2/5" for="name"
                >{{'mdrtb.form89.kidneyDisease'|get_message:request.session.locale}}</label
              >
              <div class="flex-center space-x-4 w-3/5">
                <div class="flex-center space-x-2">
                  <label for="Male"
                    >{{'mdrtb.yes'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="M" />
                </div>
                <div class="flex-center space-x-2">
                  <label for="Female"
                    >{{'mdrtb.no'|get_message:request.session.locale}}</label
                  >
                  <input required name="gender" type="radio" value="F" />
                </div>
              </div>
            </div>
          </div>
          
        </div>
        <div class="flex items-center justify-between space-x-6">
          <div class="input-container">
            <label class="tb03-form-label" for="treatmentOutcomeDate"
              >{{'mdrtb.form89.cmacDate'|get_message:request.session.locale}}</label
            >
            <input
              required
              type="date"
              class="input"
              name="treatmentOutcomeDate"
            />
          </div>
          <div class="input-container">
            <label class="tb03-form-label" for="causeOfDeath"
              >{{'mdrtb.form89.cmacNumber'|get_message:request.session.locale}}</label
            >
            <select class="input" name="causeOfDeath">
              {% for concept in concepts.causeofdeath %}
              <option value="{{concept.uuid}}">{{concept.name}}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        <div class="flex items-center justify-between space-x-6">
            <div class="input-container">
              <label class="tb03-form-label" for="treatmentOutcomeDate"
                >{{'mdrtb.form89.prescribedTreatment'|get_message:request.session.locale}}</label
              >
              <select class="input" name="causeOfDeath">
                {% for concept in concepts.prescribedtreatment %}
                <option value="{{concept.uuid}}">{{concept.name}}</option>
                {% endfor %}
              </select>
              
            </div>
            <div class="input-container">
              <label class="tb03-form-label" for="causeOfDeath"
                >{{'mdrtb.form89.placeOfCommission'|get_message:request.session.locale}}</label
              >
              <select class="input" name="causeOfDeath">
                {% for concept in concepts.cmacplace %}
                <option value="{{concept.uuid}}">{{concept.name}}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          <div class="flex items-center justify-between space-x-6">
            <div class="input-container">
              <label class="tb03-form-label" for="treatmentOutcomeDate"
                >{{'mdrtb.form89.nameOfDoctor'|get_message:request.session.locale}}</label
              >
              <input
                required
                type="date"
                class="input"
                name="treatmentOutcomeDate"
              />
            </div>
            <div class="input-container">
              <label class="tb03-form-label" for="causeOfDeath"
                >{{'mdrtb.form89.form89Date'|get_message:request.session.locale}}</label
              >
              <select class="input" name="causeOfDeath">
                {% for concept in concepts.causeofdeath %}
                <option value="{{concept.uuid}}">{{concept.name}}</option>
                {% endfor %}
              </select>
            </div>
          </div>
        
      </div>
      <div class="px-4 flex-center space-x-4">
        <button class="button-primary w-1/5">Save</button>
        <button class="cancel-button">Cancel</button>
      </div>
    </div>
  </form>
</div>
<script>
  let date = new Date();
  maxDate = date.toISOString().substring(0, 10);
  $('input[type="date"]').prop("max", maxDate);
</script>

{% endblock %}
